<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ornate Option Oracle</title>
<style>
  :root{
    --bg1:#0b0f1a;
    --bg2:#141a2e;
    --bg3:#1f1840;
    --acc1:#a0e9ff;
    --acc2:#ffb3ec;
    --acc3:#a7ffb3;
    --gold:#ffd56a;
    --hot:#ff5f6d;
    --cool:#25c4f2;
    --shadow: 0 10px 30px rgba(0,0,0,.55), inset 0 0 30px rgba(255,255,255,.04);
    --glass: rgba(255,255,255,.06);
  }

  /* Galactic animated gradient background + starfield sparkles */
  body{
    margin:0;
    min-height:100svh;
    color:#f7f8ff;
    background:
      radial-gradient(1200px 600px at 10% -10%, #3b2f80 0%, transparent 60%),
      radial-gradient(1000px 500px at 110% 10%, #1a5074 0%, transparent 55%),
      linear-gradient(145deg, var(--bg1), var(--bg2) 45%, var(--bg3));
    background-attachment: fixed;
    font:16px/1.45 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    overflow-x:hidden;
  }
  .stars, .stars::before, .stars::after{
    content:"";
    position:fixed;
    inset:-50vh -50vw;
    background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.8) 50%, transparent 52%),
      radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,.7) 50%, transparent 52%),
      radial-gradient(2px 2px at 40% 80%, rgba(255,255,255,.6) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 10% 75%, rgba(255,255,255,.5) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 90% 25%, rgba(255,255,255,.5) 50%, transparent 52%);
    animation: drift 120s linear infinite;
    pointer-events:none;
    opacity:.55;
    mix-blend-mode:screen;
  }
  .stars::before{ animation-duration: 200s; opacity:.35; transform: scale(1.3); }
  .stars::after{ animation-duration: 320s; opacity:.25; transform: scale(1.6); }
  @keyframes drift{
    from{ transform: translate3d(0,0,0); }
    to{ transform: translate3d(10vw, 10vh, 0); }
  }

  .wrap{
    max-width: min(920px, 92vw);
    margin: 6vh auto 10vh;
    padding: clamp(18px, 3vw, 28px);
    position:relative;
  }

  /* Ridiculously ornate frame */
  .frame{
    position:relative;
    padding: clamp(22px, 4vw, 36px);
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
    border-radius: 22px;
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,.15);
  }
  .frame::before, .frame::after{
    content:"";
    position:absolute; inset:-3px;
    border-radius: 24px;
    pointer-events:none;
  }
  .frame::before{
    background:
      conic-gradient(from 0deg, var(--acc1), var(--acc2), var(--acc3), var(--acc1));
    -webkit-mask: 
      linear-gradient(#000 0 0) content-box, 
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    padding: 3px;
    opacity:.7;
    filter: blur(2px);
  }
  .frame::after{
    border: 2px solid rgba(255,255,255,.25);
    box-shadow: inset 0 0 40px rgba(255,255,255,.08);
    mix-blend-mode: screen;
  }

  h1{
    font-size: clamp(28px, 4.8vw, 56px);
    margin: 0 0 .35em 0;
    letter-spacing: .02em;
    text-shadow:
      0 2px 0 rgba(0,0,0,.35),
      0 0 28px rgba(255,255,255,.25),
      0 0 42px rgba(160,233,255,.25);
  }
  .subtitle{
    margin-top: -6px;
    opacity:.85;
  }

  /* Input list */
  .inputs{
    margin-top: 18px;
    display: grid;
    gap: 12px;
  }
  .field{
    position:relative;
    border-radius: 14px;
    overflow: clip;
    background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.03));
    border: 1px solid rgba(255,255,255,.18);
    box-shadow: var(--shadow);
    transition: transform .12s ease, box-shadow .12s ease, border-color .2s ease;
  }
  .field:focus-within{
    transform: translateY(-1px);
    box-shadow: 0 18px 50px rgba(0,0,0,.6), inset 0 0 30px rgba(255,255,255,.06);
    border-color: rgba(255,255,255,.35);
  }
  .field input{
    width: 100%;
    font-size: clamp(16px, 2.2vw, 20px);
    padding: 16px 18px 16px 52px;
    border:0; outline: none; background: transparent; color: #fff;
  }
  .label-icon{
    position:absolute; left: 14px; top: 50%; transform: translateY(-50%);
    opacity:.9; filter: drop-shadow(0 2px 4px rgba(0,0,0,.4));
  }
  .label-icon svg{ display:block; width:24px; height:24px; }

  /* CTA */
  .actions{
    display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    margin-top: 18px;
  }
  .hint{ opacity:.75; font-size: 14px; }
  .roll{
    --glow: drop-shadow(0 0 6px var(--cool)) drop-shadow(0 0 22px rgba(37,196,242,.55));
    position:relative;
    display:inline-flex; align-items:center; gap:10px;
    padding: 14px 18px;
    border-radius: 14px;
    border: 1px solid rgba(255,255,255,.22);
    background:
      radial-gradient(60% 220% at 50% 0%, rgba(255,255,255,.18), rgba(255,255,255,.03)),
      linear-gradient(90deg, rgba(37,196,242,.25), rgba(255,255,255,0), rgba(255,95,109,.25));
    color:#fff; font-weight:700; letter-spacing:.02em;
    box-shadow: var(--shadow);
    filter: var(--glow);
    cursor:pointer;
    transition: transform .12s ease, filter .2s ease, box-shadow .2s ease, opacity .2s ease;
  }
  .roll:disabled{
    cursor:not-allowed; opacity:.5; filter:none;
  }
  .roll:not(:disabled):active{ transform: translateY(1px) scale(.995); }

  /* Roulette button */
  .roulette{
    display:flex; align-items:center; justify-content:center;
    width:100%;
    min-height: 48vh;
    margin-top: 16px;
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,.2);
    background:
      radial-gradient(60% 100% at 50% 0%, rgba(255,255,255,.08), rgba(255,255,255,.02)),
      linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
    box-shadow: var(--shadow);
    position:relative; overflow:hidden;
  }
  .roulette button{
    font-size: clamp(26px, 6.5vw, 56px);
    padding: 18px 24px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,.25);
    background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.05));
    color:#fff; font-weight:800; letter-spacing:.02em;
    text-shadow: 0 2px 0 rgba(0,0,0,.25), 0 0 24px rgba(255,255,255,.15);
    box-shadow: var(--shadow);
    cursor:pointer;
    animation: pulse 1.5s ease-in-out infinite;
  }
  @keyframes pulse{
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  .speedlines{
    position:absolute; inset:0; pointer-events:none; opacity:.35; mix-blend-mode:screen;
    background: repeating-conic-gradient(from 0deg, rgba(255,255,255,.06) 0 2deg, transparent 2deg 4deg);
    animation: spin 1.2s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Winner card */
  .winner{
    margin-top: 24px;
    border-radius: 22px;
    padding: clamp(22px,4vw,36px);
    background:
      radial-gradient(80% 140% at 50% 0%, rgba(255,255,255,.14), rgba(255,255,255,.03)),
      linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border: 1px solid rgba(255,255,255,.25);
    box-shadow: var(--shadow);
    text-align:center;
    position:relative; overflow:hidden;
  }
  .winner h2{
    font-size: clamp(30px, 7vw, 64px);
    margin: 0 0 10px 0;
    line-height:1.05;
    background: linear-gradient(90deg, var(--gold), #fff 40%, var(--gold));
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-shadow: 0 2px 0 rgba(0,0,0,.35), 0 0 30px rgba(255,213,106,.35);
  }
  .winner .tag{
    display:inline-block;
    padding:6px 10px; border-radius: 999px;
    border:1px solid rgba(255,255,255,.3);
    background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
    font-weight:700; letter-spacing:.03em; opacity:.9;
  }
  .laurel{
    position:absolute; inset:-30%; pointer-events:none; opacity:.25;
    background:
      radial-gradient(ellipse at 30% 50%, rgba(255,255,255,.1), transparent 60%),
      radial-gradient(ellipse at 70% 50%, rgba(255,255,255,.1), transparent 60%);
    filter: blur(12px);
  }

  /* Confetti */
  .confetti{
    position:fixed; inset:0; pointer-events:none; overflow:hidden;
  }
  .confetti span{
    position:absolute;
    width:10px; height:16px; border-radius:2px;
    transform-origin:center;
    opacity: .95;
    animation: fall 1.8s ease-in forwards, spinny .9s linear infinite;
  }
  @keyframes fall{
    0% { transform: translate3d(var(--x), -10vh, 0) rotate(0deg); }
    100% { transform: translate3d(calc(var(--x) + var(--drift)), 110vh, 0) rotate(720deg); }
  }
  @keyframes spinny{
    from{ filter: hue-rotate(0deg) brightness(1.1); }
    to{ filter: hue-rotate(360deg) brightness(1.1); }
  }

  /* Helper visibility */
  .hidden{ display:none !important; }

  /* Accessibility helper for live updates */
  .sr{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
</style>
</head>
<body>
<div class="stars"></div>
<div class="wrap">
  <div class="frame" id="app" aria-live="polite">
    <h1>Behold: the Ornate Option Oracle</h1>
    <p class="subtitle">Type your choices. Leave one blank to add more. Clear an empty field and click away to make it vanish. Then roll fate like a show-off wizard.</p>

    <!-- Dynamic inputs -->
    <div class="inputs" id="inputs" role="list">
      <!-- Inputs inserted by JS -->
    </div>

    <!-- Actions -->
    <div class="actions" id="actions">
      <span class="hint">Pro tip: you’ll need at least two choices to roll.</span>
      <button id="roll" class="roll" disabled title="Roll the dice">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <rect x="3" y="3" width="18" height="18" rx="4" stroke="currentColor" stroke-width="2"/>
          <circle cx="9" cy="9" r="1.6" fill="currentColor"/>
          <circle cx="12" cy="12" r="1.6" fill="currentColor"/>
          <circle cx="15" cy="15" r="1.6" fill="currentColor"/>
        </svg>
        Roll the Dice
      </button>
    </div>

    <!-- Roulette phase -->
    <div id="roulette" class="roulette hidden" aria-live="polite">
      <div class="speedlines"></div>
      <button id="rouletteBtn" title="Click to stop"></button>
    </div>

    <!-- Results -->
    <div id="result" class="winner hidden" aria-live="polite">
      <div class="laurel"></div>
      <h2 id="winnerText"></h2>
      <div class="tag">Selected</div>
    </div>

    <!-- Screen reader live text -->
    <div id="live" class="sr" aria-live="polite"></div>
  </div>
</div>
<div id="confetti" class="confetti" aria-hidden="true"></div>

<script>
(function(){
  const inputsWrap = document.getElementById('inputs');
  const rollBtn = document.getElementById('roll');
  const actions = document.getElementById('actions');
  const roulette = document.getElementById('roulette');
  const rouletteBtn = document.getElementById('rouletteBtn');
  const result = document.getElementById('result');
  const winnerText = document.getElementById('winnerText');
  const live = document.getElementById('live');
  const confettiRoot = document.getElementById('confetti');

  let fields = []; // track inputs
  let options = [];
  let rafId = null;
  let running = false;
  let idx = 0;

  // Create a new input field component
  function createField(placeholder = "Type an option…"){
    const wrap = document.createElement('div');
    wrap.className = 'field';
    wrap.role = 'listitem';

    const icon = document.createElement('div');
    icon.className = 'label-icon';
    icon.innerHTML = `
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#25c4f2"/>
            <stop offset="1" stop-color="#ff5f6d"/>
          </linearGradient>
        </defs>
        <circle cx="12" cy="12" r="10" stroke="url(#g)" stroke-width="2" fill="none"/>
        <circle cx="12" cy="12" r="3.2" fill="url(#g)"/>
      </svg>
    `;
    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = placeholder;
    input.setAttribute('aria-label', 'Option');
    input.dataset.prev = ""; // track previous value to detect transitions
    wrap.append(icon, input);

    // Listener: on input, if transitioned from blank -> nonblank, maybe add another field
    input.addEventListener('input', () => {
      const prev = input.dataset.prev;
      const val = input.value.trim();
      input.dataset.prev = input.value; // store raw, but trim for checks

      updateRollState();

      // If this field transitioned from blank to nonblank, ensure there's at least one empty field after it
      if (prev.trim() === "" && val !== "") {
        const emptiesAfter = fields.slice(fields.indexOf(input)+1).some(i => i.value.trim() === "");
        if (!emptiesAfter) {
          const f = createField("Add another…");
          inputsWrap.appendChild(f.parentElement);
          fields.push(f);
        }
      }
    });

    // Listener: on blur, if blank and we have more than one field, remove this one
    input.addEventListener('blur', () => {
      const val = input.value.trim();
      if (val === "" && fields.length > 1) {
        const pos = fields.indexOf(input);
        if (pos > -1) {
          fields.splice(pos, 1);
        }
        wrap.remove();
        updateRollState();
      }
    });

    return input;
  }

  function updateRollState(){
    const nonEmpty = fields.map(i => i.value.trim()).filter(Boolean);
    // Require 2+ options to enable roll; it’s a dice, not a coin toss
    const canRoll = nonEmpty.length >= 2;
    rollBtn.disabled = !canRoll;
  }

  // Initialize with a single field + a spare
  function initFields(){
    const first = createField("Type an option…");
    inputsWrap.appendChild(first.parentElement);
    fields.push(first);
    // add one spare
    const spare = createField("Add another…");
    inputsWrap.appendChild(spare.parentElement);
    fields.push(spare);
    first.focus();
    updateRollState();
  }

  // Transition to roulette view
  function startRoulette(){
    options = fields.map(i => i.value.trim()).filter(Boolean);
    // minimal safety: unique consecutive duplicates are fine; we keep order
    // Hide inputs/actions, show roulette
    inputsWrap.classList.add('hidden');
    actions.classList.add('hidden');
    roulette.classList.remove('hidden');

    // Seed roulette text and go
    idx = Math.floor(Math.random() * options.length);
    rouletteBtn.textContent = options[idx];
    running = true;
    live.textContent = "Rolling… click to stop.";
    spin();
  }

  function spin(){
    // Cycle blazingly fast — update on every animation frame
    // Optionally jitter the speed slightly for extra chaos
    idx = (idx + 1) % options.length;
    rouletteBtn.textContent = options[idx];
    if (running){
      rafId = requestAnimationFrame(spin);
    }
  }

  function stopRoulette(){
    running = false;
    if (rafId) cancelAnimationFrame(rafId);
    const chosen = options[idx];
    roulette.classList.add('hidden');
    showWinner(chosen);
    fireConfetti();
    live.textContent = `Selected: ${chosen}`;
  }

  function showWinner(text){
    winnerText.textContent = text;
    result.classList.remove('hidden');
    // tasteful (well… maximalist) entrance
    result.animate([
      { transform: 'scale(.96)', opacity: 0 },
      { transform: 'scale(1)', opacity: 1 }
    ], { duration: 320, easing: 'cubic-bezier(.2,.8,.2,1)', fill:'both' });
  }

  function fireConfetti(){
    // Generate a glorious, unnecessary amount of confetti
    const count = 160;
    for (let i=0;i<count;i++){
      const piece = document.createElement('span');
      const hue = Math.floor(Math.random()*360);
      const x = Math.floor(Math.random()*100);
      const drift = (Math.random()*30 - 15) + 'vw';
      piece.style.setProperty('--x', x + 'vw');
      piece.style.setProperty('--drift', drift);
      piece.style.left = x + 'vw';
      piece.style.top = '-10vh';
      piece.style.background = `hsl(${hue} 90% 60%)`;
      piece.style.animationDelay = (Math.random()*0.3) + 's';
      piece.style.transform = `translate3d(${x}vw,-10vh,0) rotate(${Math.random()*360}deg)`;
      confettiRoot.appendChild(piece);
      // Clean up after animation
      piece.addEventListener('animationend', () => piece.remove());
    }
  }

  // Wire up actions
  rollBtn.addEventListener('click', startRoulette);
  rouletteBtn.addEventListener('click', stopRoulette);

  // Kickoff
  initFields();

  // Keyboard nicety: Enter creates another field if current is non-empty
  inputsWrap.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && e.target instanceof HTMLInputElement){
      const val = e.target.value.trim();
      if (val !== ""){
        const f = createField("Add another…");
        inputsWrap.appendChild(f.parentElement);
        fields.push(f);
        f.focus();
        updateRollState();
      }
    }
  });

})();
</script>
</body>
</html>
